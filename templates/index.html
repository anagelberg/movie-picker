{% extends 'bootstrap/base.html' %}
{% include "header.html" %}

{% block styles %}
  {{ super() }}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
{% endblock %}

{% block scripts %}
<script> var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    }
  });
}</script>

{% endblock %}


{% block title %} My Watchlist {% endblock %}

{% block content %}
<a href="{{ url_for('test') }}" class="button">TEST</a>

<div class="container-fluid">

  <h1 class="heading">My Movie Jars</h1>


    <!-- Movie lists -->
    {% for movie_list in watchlists %}
<button type="button" class="collapsible" style="margin : 1px; fontsize: 14px;">{{movie_list.name}}</button>
<div class="content">



 <!-- display movie area -->
    <div class="container-fluid" style="margin: 2rem;">
        <div class="row justify-content-center">
    {% for movie in movie_list.movies %}
    <!-- one card -->
    <div class="card col-xl-2 col-lg-3 col-md-4 col-sm-12 border-0 m-1">
        <div class="front" style="background-image: url({{ movie.img_url }}); right:0px;">
        </div>
        <div class="back" style="right:0px; border-style:groove; border-width: 2px;">
            <div>
                <div class="title">{{ movie.title }} <br></div>
                <div class="rating">
                    <label>{{ movie.pop_rating }}</label>
                    <i class="fas fa-star star"></i>
                </div>
                <p class="genre">{{ movie.genre }}</p>
                <p class="genre">{{ movie.emotional_vibe }} emotionally, {{ movie.mental_vibe }} mentally </p>
                <p class="run_time">{{ movie.run_time }} minutes</p>
                <p class="overview">
                    {{ movie.description }}
                </p>

                <a href="{{ url_for('edit', movie_id=movie.id) }}" class="button">Update</a>
                <a href="{{ url_for('delete', movie_id=movie.id) }}" class="button delete-button">Delete</a>

            </div>
        </div>
    </div>
    <!-- end card -->
    {% endfor %}
    </div>
        </div>
    <!--end movie display -->

<div class="container text-center add">
<a href="{{ url_for('show_search_screen', watchlist_id=movie_list.id) }}" class="button">Add Movie</a>
</div>
</div>
    {%endfor %}

    <!-- get button to work -->
    <form action="{{url_for('create_list')}}">
         <button class="collapsible" type="submit" style="margin : 1px; fontsize: 14px;">+ Create new movie jar</button>
      </form>


</div>






<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/vibe_selector.js')}}"></script>

{% endblock %}